# Floating Audio Player - Visual Implementation Guide

**Commit:** d3fe4bb  
**Date:** November 2, 2025

## Visual Architecture

### Component Hierarchy

```
page_detail.html
├── Main Content (col-lg-8)
│   ├── Page Header
│   ├── Markdown Content
│   ├── Edit Modal
│   └── Pagination
│
├── Sidebar (col-lg-4) - Desktop Only
│   └── Position Sticky Top
│       ├── Audio Player Card
│       │   ├── Audio Element (main)
│       │   ├── [Main Player Controls]
│       │   │   ├── [-30s Rewind]
│       │   │   ├── [+30s Forward]
│       │   │   ├── [Download]
│       │   │   └── [Delete]
│       │   └── Metadata Display
│       │
│       ├── Voice Selector
│       ├── Generate Button
│       └── Quota Card
│
└── Floating Audio Player (Mobile Only)
    └── Position Fixed (bottom-right)
        ├── Close Button (✕)
        ├── Voice Label
        ├── Audio Element (floating)
        └── [Floating Controls]
            ├── [-30s Rewind]
            ├── [▶/⏸ Play/Pause]
            └── [+30s Forward]
```

## Responsive Layout Transitions

### Breakpoint: 1200px (lg breakpoint)

#### Desktop View (≥1200px)
```
┌─────────────────────────────────────────────────────────────┐
│ HEADER (Full Width)                                         │
├──────────────────────────┬──────────────────────────────────┤
│ Main Content             │ Sidebar                          │
│ (col-lg-8)               │ (col-lg-4, sticky)               │
│                          │                                  │
│ ┌────────────────────┐   │ ┌──────────────────────────────┐ │
│ │ Page Header        │   │ │ AUDIO PLAYER CARD           │ │
│ └────────────────────┘   │ │ Playing: Joey                │ │
│                          │ │                              │ │
│ ┌────────────────────┐   │ │ ♪ ════════════════════○────  │ │
│ │ Markdown Content   │   │ │                              │ │
│ │                    │   │ │ [-30s] [+30s]               │ │
│ │ Lorem ipsum dolor  │   │ │ [Download] [Delete]         │ │
│ │ sit amet...        │   │ │                              │ │
│ │ [scrollable]       │   │ │ Generated by: Frederick      │ │
│ │                    │   │ │ Created: 11/02/2025          │ │
│ └────────────────────┘   │ └──────────────────────────────┘ │
│                          │                                  │
│ ┌────────────────────┐   │ ┌──────────────────────────────┐ │
│ │ [Prev Page]        │   │ │ VOICE SELECTOR               │ │
│ │ Page 1 of 5        │   │ │ [Select Voice ▼]            │ │
│ │ [Next Page]        │   │ │ [Generate Audio]            │ │
│ └────────────────────┘   │ └──────────────────────────────┘ │
│                          │                                  │
│                          │ ┌──────────────────────────────┐ │
│                          │ │ AUDIO QUOTA                  │ │
│                          │ │ Used: 3/10                   │ │
│                          │ │ ███░░░░░░░ 7 remaining       │ │
│                          │ └──────────────────────────────┘ │
└──────────────────────────┴──────────────────────────────────┘
```

**Key Points:**
- Sidebar player always visible (position: sticky)
- Full player controls accessible
- -30s and +30s buttons visible
- No floating player shown

#### Tablet View (768px - 1199px)
```
┌────────────────────────────┐
│ HEADER (Full Width)        │
├────────────────────────────┤
│ Main Content               │
│ (Full Width)               │
│                            │
│ ┌──────────────────────┐   │
│ │ Page Header          │   │
│ └──────────────────────┘   │
│                            │
│ ┌──────────────────────┐   │
│ │ Markdown Content     │   │
│ │                      │   │
│ │ Lorem ipsum dolor    │   │
│ │ sit amet...          │   │
│ │ [scrollable]         │   │
│ │                      │   │
│ └──────────────────────┘   │
│                            │
│ ┌──────────────────────┐   │
│ │ [Prev] Page 1 of 5   │   │
│ │ [Next]               │   │
│ └──────────────────────┘   │
│                            │
│   ╔════════════════════╗   │ ← Floating Player
│   ║ ▶ -30s Joey  +30s ║   │   (bottom-right, z=1030)
│   ║ ♪ ════════════○── ║   │
│   ║ ▮▮ [▶] ⏩ ⏸     ║   │
│   ╚════════════════════╝   │
│                            │
└────────────────────────────┘
```

**Key Points:**
- Sidebar hidden or repositioned
- Content uses full width
- Floating player appears on bottom-right
- Stays visible during scroll
- Mobile-optimized controls

#### Mobile View (<768px - Portrait)
```
┌──────────────────────────┐
│ HEADER                   │
├──────────────────────────┤
│ Main Content             │
│                          │
│ ┌────────────────────┐   │
│ │ Page Header        │   │
│ └────────────────────┘   │
│                          │
│ ┌────────────────────┐   │
│ │ Markdown Content   │   │
│ │                    │   │
│ │ Lorem ipsum dolor  │   │
│ │ sit amet...        │   │
│ │ [scrollable]       │   │
│ │                    │   │
│ │                    │   │
│ └────────────────────┘   │
│                          │
│ ┌────────────────────┐   │
│ │ [Prev] Page 1 of 5 │   │
│ │ [Next]             │   │
│ └────────────────────┘   │
│                          │
│    ╔──────────────────╗  │
│    ║ ✕ Joey          ║  │
│    ║                  ║  │
│    ║ ♪ ═══════○──────║  │
│    ║                  ║  │
│    ║ ⏪  ▶/⏸  ⏩     ║  │
│    ╚──────────────────╝  │
│ (padding: 380px bottom)  │
│                          │
└──────────────────────────┘
```

**Key Points:**
- Full-width content
- Floating player in bottom-right corner
- Compact, three-button control layout
- Page has bottom padding to prevent overlap
- Close button to hide player

## CSS Grid System

### Main Container
```css
div.row {
    display: flex;           /* Bootstrap row */
}

/* Desktop */
@media (min-width: 992px) {
    div.col-lg-8 {
        flex: 0 0 66.67%;    /* 2/3 width */
    }
    
    div.col-lg-4 {
        flex: 0 0 33.33%;    /* 1/3 width */
    }
}

/* Mobile */
@media (max-width: 991px) {
    div.col-lg-8, div.col-lg-4 {
        flex: 0 0 100%;      /* Full width */
    }
}
```

## Floating Player Positioning

```css
.floating-audio-player {
    position: fixed;        /* Always visible */
    bottom: 20px;          /* 20px from bottom */
    right: 20px;           /* 20px from right */
    width: 320px;
    max-width: calc(100vw - 40px);  /* Responsive width */
    z-index: 1030;         /* Above Bootstrap elements */
}

/* Mobile adjustments */
@media (max-width: 768px) {
    body.has-floating-player {
        padding-bottom: 380px;  /* Prevent overlap */
    }
}
```

## Animation Timing

### Slide-In Animation
```
Timeline (300ms)
├─ 0ms: opacity=0, translateY(20px)
├─ 150ms: opacity=0.5, translateY(10px)
└─ 300ms: opacity=1, translateY(0px) ← COMPLETE
```

```css
@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.floating-audio-player {
    animation: slideInUp 0.3s ease-out;
}
```

**Visual Effect:**
```
Frame 1:          Frame 2:           Frame 3 (Final):
┌─────────┐       ┌─────────┐        ┌─────────┐
│ 0%      │       │ 50%     │        │ 100%    │
│░░░░░░░░░│ ~~~> │▒▒▒▒▒▒▒▒▒│ ~~~> │█████████│
└─────────┘       └─────────┘        └─────────┘
(faded)           (semi-visible)      (fully visible)
(low)             (mid-height)        (full height)
```

## Color Scheme

### Dark Theme Colors

```css
/* Background */
#242930 - Player background (dark blue-gray)
#101216 - Navbar background (very dark)

/* Borders & Accents */
#495057 - Border color (medium gray)

/* Text */
#e0e6eb - Primary text (light gray)
#adb5bd - Secondary text (medium gray)
#999   - Tertiary text (muted gray)

/* Buttons */
#007bff - Primary (Bootstrap blue)
#ffc107 - Warning (Bootstrap yellow) - used for ±30s buttons
#dc3545 - Danger (Bootstrap red)

/* Shadow */
rgba(0, 0, 0, 0.5) - Button shadow
```

### Button States

```css
/* Default */
.btn-outline-warning {
    color: #ffc107;
    background-color: transparent;
    border-color: #ffc107;
}

/* Hover */
.btn-outline-warning:hover {
    color: #fff;
    background-color: #ffc107;
    border-color: #ffc107;
}

/* Active/Focused */
.btn-outline-warning:active,
.btn-outline-warning:focus {
    box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.5);
}
```

## Typography

### Font Stack
```css
body {
    font-family: 'Inter', sans-serif;  /* App-wide font */
}

#contentInput,
.floating-audio-player audio {
    font-family: monospace;  /* Code display */
}
```

### Font Sizes
```css
.player-header {
    font-size: 0.9rem;     /* Compact header */
}

.floating-audio-player button {
    font-size: 0.8rem;     /* Small buttons */
}

.floating-audio-player button i {
    font-size: 0.9rem;     /* Icon size */
}
```

## Icon Reference

All icons from Bootstrap Icons (v1.11.1):

| Icon | Class | Usage |
|------|-------|-------|
| Rewind | `bi-rewind` | -30s button |
| Fast Forward | `bi-fast-forward` | +30s button |
| Play Fill | `bi-play-fill` | Play control |
| Pause Fill | `bi-pause-fill` | Pause control |
| Volume Up | `bi-volume-up` | Header indicator |
| X Large | `bi-x-lg` | Close button |
| Download | `bi-download` | Download button |
| Trash | `bi-trash` | Delete button |

## Event Flow Diagram

```
User Interactions:
┌──────────────────────────┐
│  Main Player Click       │
│  (rewind/forward)        │
└────────────┬─────────────┘
             │ Updates audioElement.currentTime
             ▼
    ┌────────────────────┐
    │ audioElement fires │
    │ 'timeupdate' event │
    └────────┬───────────┘
             │ Syncs to floating player
             ▼
    ┌────────────────────────┐
    │ floatingAudioElement.  │
    │ currentTime = newTime  │
    └────────────────────────┘
    
┌──────────────────────────┐
│  Floating Player Click   │
│  (rewind/forward)        │
└────────────┬─────────────┘
             │ Updates floatingAudioElement.currentTime
             ▼
    ┌────────────────────────┐
    │ floatingAudioElement   │
    │ fires 'timeupdate'     │
    └────────┬───────────────┘
             │ Syncs to main player
             ▼
    ┌────────────────────────┐
    │ audioElement.currentTime│
    │ = newTime              │
    └────────────────────────┘
```

## Responsive Breakpoints Summary

| Device | Width | Player | Controls | Notes |
|--------|-------|--------|----------|-------|
| Large Desktop | ≥1200px | Sidebar | -30s, +30s | Always visible |
| Desktop | 992px-1199px | Floating | -30s, +30s | Right side |
| Tablet | 768px-991px | Floating | -30s, +30s, ▶/⏸ | Right side |
| Mobile | <768px | Floating | -30s, ▶/⏸, +30s | Right side, 380px padding |

## Testing Visual Layout

### Desktop (1920x1080)
```
Expected: Sidebar visible, no floating player
Screenshot area: Sidebar right side
Assert: col-lg-4 has content, floating-player hidden
```

### Tablet (768x1024)
```
Expected: Floating player bottom-right
Screenshot area: Bottom-right corner
Assert: floating-player.active visible, 320px wide
```

### Mobile (375x812)
```
Expected: Floating player, compact controls
Screenshot area: Bottom-right with close button
Assert: padding-bottom active, player responsive
```

---

**Status:** ✅ Production Ready

**Related Files:**
- `templates/document_processing/page_detail.html`
- `AUDIO_PLAYER_ENHANCEMENTS.md`
- `FLOATING_PLAYER_QUICK_START.md`
