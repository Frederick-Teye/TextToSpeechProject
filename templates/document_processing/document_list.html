{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>My Documents</h2>
        <a href="{% url 'document_processing:upload' %}" class="btn btn-primary">Upload New Document</a>
    </div>
    <hr>
    {% if documents %}
    <div class="list-group">
        {% for document in documents %}
        <a href="{% url 'document_processing:detail' document.pk %}"
            class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">{{ document.title|default:"Untitled Document" }}</h5>
                <small class="text-muted">{{ document.created_at|date:"F d, Y" }}</small>
            </div>
            <p class="mb-1">
                Status:
                <span class="badge rounded-pill 
                            {% if document.status == 'PROCESSING' %}text-bg-warning
                            {% elif document.status == 'COMPLETED' %}text-bg-success
                            {% elif document.status == 'FAILED' %}text-bg-danger
                            {% else %}text-bg-secondary{% endif %}">
                    {{ document.get_status_display }}
                </span>
            </p>
            <small class="text-muted">Source: {{ document.get_source_display }}</small>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info" role="alert">
        You haven't uploaded any documents yet. Why not
        <a href="{% url 'document_processing:upload' %}" class="alert-link">upload your first one</a>?
    </div>
    {% endif %}
</div>
{% endblock content %}